
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSC Typing Pro - Official Skill Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #0f172a; overflow-x: hidden; }
        .font-mono-typing { font-family: 'JetBrains Mono', monospace; }
        
        /* Character Highlighting: No padding or border to prevent layout shifts */
        .char-correct { color: #1e293b; background: transparent; }
        .char-incorrect { color: #ffffff; background: #dc2626; border-radius: 1px; }
        .char-current { 
            color: #1e40af; 
            background: #dbeafe; 
            box-shadow: inset 0 -3px 0 0 #3b82f6;
        }
        .char-pending { color: #94a3b8; }
        
        :root {
            --lh: 2.2; /* Official Line Height */
            --fs: 1.5rem; /* Large font for readability (24px) */
        }

        /* Passage Preview: Exactly 4 Lines */
        #typing-preview-container {
            height: calc(4 * var(--fs) * var(--lh) + 2rem); 
            overflow: hidden;
            position: relative;
            background: #ffffff;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
        }

        #typing-preview {
            white-space: pre-wrap;
            word-break: keep-all; /* CRITICAL: Prevents words from splitting */
            overflow-wrap: break-word;
            line-height: var(--lh);
            font-size: var(--fs);
            padding: 1rem 1.5rem;
            margin: 0;
            display: block;
            scroll-behavior: smooth;
            height: 100%;
            overflow-y: scroll; 
            user-select: none;
            scrollbar-width: none;
        }
        #typing-preview::-webkit-scrollbar { display: none; }

        /* Typing Input: Exactly 2 Lines */
        #typing-area-wrapper {
            height: calc(2 * var(--fs) * var(--lh) + 2rem);
            border-radius: 1rem;
            overflow: hidden;
            border: 3px solid #dbeafe;
            background: white;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        #typing-area {
            line-height: var(--lh);
            font-size: var(--fs);
            height: 100%;
            padding: 1rem 1.5rem;
            resize: none;
            outline: none;
            border: none;
            width: 100%;
            background: transparent;
            display: block;
            overflow-y: auto;
        }

        .animate-fade { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        #config-modal { background: rgba(15, 23, 42, 0.5); backdrop-filter: blur(8px); }
        
        .btn-black { 
            background-color: #0f172a; 
            color: white; 
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .btn-black:hover { background-color: #1e293b; transform: translateY(-1px); }

        /* Compact Dashboard Cards */
        .practice-card {
            background: white;
            padding: 1.25rem;
            border-radius: 1.25rem;
            border: 1px solid #f1f5f9;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .practice-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08);
            border-color: #e2e8f0;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-white border-b border-slate-100 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 cursor-pointer" onclick="app.showHome()">
                <div class="bg-blue-600 p-1.5 rounded-lg">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <span class="text-xl font-black tracking-tighter text-slate-900">SSC<span class="text-blue-600">TypingPro</span></span>
            </div>
            <nav class="hidden md:flex items-center gap-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                <a href="javascript:void(0)" onclick="app.showHome()" class="hover:text-blue-600 transition">Dashboard</a>
                <a href="javascript:void(0)" onclick="app.setView('about')" class="hover:text-blue-600 transition">Exam Pattern</a>
                <a href="javascript:void(0)" onclick="app.setView('contact')" class="hover:text-blue-600 transition">Support</a>
            </nav>
        </div>
    </header>

    <!-- MAIN VIEW -->
    <main id="app-view" class="flex-grow"></main>

    <!-- FOOTER -->
    <footer class="bg-slate-900 text-slate-500 py-12 mt-auto">
        <div class="max-w-7xl mx-auto px-8 text-center">
            <p class="text-[10px] font-black uppercase tracking-widest text-slate-700 mb-4">Official Typing Practice Portal</p>
            <p class="text-[10px] font-bold uppercase tracking-widest">© 2024 SSC Typing Pro • Built for Aspirants</p>
        </div>
    </footer>

    <!-- MODAL -->
    <div id="config-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-6">
        <div class="bg-white rounded-[2rem] w-full max-w-sm p-10 shadow-2xl animate-fade">
            <h3 class="text-2xl font-black text-slate-900 mb-1">Set Test Time</h3>
            <p class="text-slate-500 text-sm font-bold mb-8">Select duration for your practice session.</p>
            <div class="grid grid-cols-2 gap-3 mb-8">
                <button onclick="app.setDuration(120, this)" class="duration-btn py-4 rounded-xl border-2 border-slate-100 font-black text-slate-400 hover:border-blue-500 transition-all text-sm">2 Min</button>
                <button onclick="app.setDuration(300, this)" class="duration-btn py-4 rounded-xl border-2 border-slate-100 font-black text-slate-400 hover:border-blue-500 transition-all text-sm">5 Min</button>
                <button onclick="app.setDuration(600, this)" class="duration-btn py-4 rounded-xl border-2 border-blue-500 bg-blue-50 text-blue-600 font-black text-sm">10 Min</button>
                <button onclick="app.setDuration(900, this)" class="duration-btn py-4 rounded-xl border-2 border-slate-100 font-black text-slate-400 hover:border-blue-500 transition-all text-sm">15 Min</button>
            </div>
            <div class="flex gap-3">
                <button onclick="app.closeModal()" class="flex-1 font-black text-slate-400 uppercase tracking-widest text-[10px]">Back</button>
                <button onclick="app.startTest()" class="flex-[2] py-4 bg-blue-600 text-white font-black rounded-xl shadow-lg uppercase tracking-widest text-sm">Start Practice</button>
            </div>
        </div>
    </div>

    <script>
        const PASSAGES = [
          { id: 'p1', cat: 'CGL', lang: 'English', title: 'Digital Transformation in India', text: `The Digital India initiative was launched with a vision to transform India into a digitally empowered society and a knowledge economy. This flagship program of the Government of India aims to provide a fillip to the electronics manufacturing sector in the country. The initiative includes plans to connect rural areas with high-speed internet networks. Digital India has three core components: the creation of digital infrastructure, delivering services digitally and digital literacy. It seeks to ensure that government services are available to citizens electronically. The program also focuses on bridging the digital divide between the urban and rural population by providing various digital facilities.` },
          { id: 'p2', cat: 'CHSL', lang: 'English', title: 'Indian Constitutional Framework', text: `The Constitution of India is the supreme law of the land. It provides the framework for the political principles, procedures, and powers of the government. It was adopted by the Constituent Assembly on 26th November 1949 and came into effect on 26th January 1950. The Constitution provides for a federal structure with a unitary tilt. It establishes a parliamentary system of government at both the central and state levels. The fundamental rights guaranteed by the Constitution are essential for the holistic development of every citizen.` },
          { id: 'p3', cat: 'MTS', lang: 'English', title: 'Environmental Policy', text: `Sustainable development is defined as development that meets the needs of the present without compromising the ability of future generations to meet their own needs. The United Nations has outlined seventeen Sustainable Development Goals to be achieved by 2030. These goals address global challenges related to poverty, inequality, climate change, environmental degradation, peace, and justice. India is committed to achieving these goals through various national programs and policies.` }
        ];

        const app = {
            state: { view: 'home', duration: 600, selectedPassage: null, input: '', timeLeft: 600, isTesting: false, timer: null },

            init() { this.showHome(); },
            setView(v) { this.state.view = v; this.render(); window.scrollTo(0,0); },
            showHome() { 
                this.resetTimer();
                this.state.view = 'home'; 
                this.state.input = ''; 
                this.render(); 
            },
            resetTimer() {
                if (this.state.timer) clearInterval(this.state.timer);
                this.state.timer = null;
                this.state.isTesting = false;
            },
            openConfig(id) {
                this.state.selectedPassage = PASSAGES.find(p => p.id === id);
                document.getElementById('config-modal').classList.remove('hidden');
            },
            closeModal() { document.getElementById('config-modal').classList.add('hidden'); },
            setDuration(s, btn) {
                this.state.duration = s; this.state.timeLeft = s;
                document.querySelectorAll('.duration-btn').forEach(el => el.className = "duration-btn py-4 rounded-xl border-2 border-slate-100 font-black text-slate-400 hover:border-blue-500 transition-all text-sm");
                btn.className = "duration-btn py-4 rounded-xl border-2 border-blue-500 bg-blue-50 text-blue-600 font-black text-sm";
            },
            startTest() {
                this.closeModal(); 
                this.resetTimer();
                this.state.view = 'test'; 
                this.state.input = ''; 
                this.state.timeLeft = this.state.duration; 
                this.render();
                // Focus and clear textarea value explicitly to fix Restart bug
                setTimeout(() => { 
                    const ta = document.getElementById('typing-area'); 
                    if (ta) { ta.value = ''; ta.focus(); }
                    const tp = document.getElementById('typing-preview');
                    if (tp) tp.scrollTop = 0;
                }, 50);
            },
            restartTest() {
                // Instantly restart without confirm for better UX
                this.startTest();
            },
            handleInput(e) {
                if (!this.state.isTesting && e.target.value.length > 0) {
                    this.state.isTesting = true;
                    this.state.timer = setInterval(() => { 
                        this.state.timeLeft--; 
                        if (this.state.timeLeft <= 0) this.finishTest(); 
                        this.updateUI(); 
                    }, 1000);
                }
                const val = e.target.value;
                if (val.length <= this.state.selectedPassage.text.length) {
                    this.state.input = val; 
                    this.renderPreview(); 
                    this.updateUI();
                    if (val.length === this.state.selectedPassage.text.length) this.finishTest();
                }
            },
            calculate() {
                const text = this.state.selectedPassage.text;
                const typed = this.state.input;
                const mins = (this.state.duration - this.state.timeLeft) / 60 || 0.01;
                let mistakes = 0;
                for (let i = 0; i < typed.length; i++) { if (typed[i] !== text[i]) mistakes++; }
                const gwpm = Math.round((typed.length / 5) / mins);
                const nwpm = Math.max(0, Math.round(((typed.length - (mistakes * 5)) / 5) / mins));
                const acc = typed.length > 0 ? Math.round(((typed.length - mistakes) / typed.length) * 100) : 100;
                return { gwpm, nwpm, acc, mistakes, keys: typed.length };
            },
            updateUI() {
                const res = this.calculate();
                const mm = Math.floor(this.state.timeLeft / 60), ss = this.state.timeLeft % 60;
                const timeStr = `${mm}:${ss < 10 ? '0' : ''}${ss}`;
                const ui_t1 = document.getElementById('ui-timer-header');
                const ui_t2 = document.getElementById('ui-timer-para');
                if (ui_t1) ui_t1.innerText = timeStr;
                if (ui_t2) ui_t2.innerText = timeStr;
                if (document.getElementById('ui-net')) document.getElementById('ui-net').innerText = res.nwpm;
                if (document.getElementById('ui-gross')) document.getElementById('ui-gross').innerText = res.gwpm;
                if (document.getElementById('ui-keys')) document.getElementById('ui-keys').innerText = res.keys;
            },
            finishTest() { 
                this.resetTimer();
                this.state.view = 'results'; 
                this.render(); 
            },
            renderPreview() {
                const container = document.getElementById('typing-preview');
                if (!container) return;
                const text = this.state.selectedPassage.text;
                const input = this.state.input;
                let html = '';
                for (let i = 0; i < text.length; i++) {
                    let cls = i < input.length ? (input[i] === text[i] ? 'char-correct' : 'char-incorrect') : (i === input.length ? 'char-current' : 'char-pending');
                    html += `<span class="${cls}">${text[i]}</span>`;
                }
                container.innerHTML = html;
                
                const cur = container.querySelector('.char-current');
                if (cur) {
                    const charOffsetTop = cur.offsetTop;
                    const baseFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);
                    const lineHeightPx = 2.2 * 1.5 * baseFontSize; 
                    if (charOffsetTop > lineHeightPx * 2) {
                        container.scrollTop = charOffsetTop - lineHeightPx;
                    } else {
                        container.scrollTop = 0;
                    }
                }
            },
            render() {
                const main = document.getElementById('app-view');
                if (this.state.view === 'home') {
                    main.innerHTML = `
                        <div class="max-w-7xl mx-auto px-6 py-12 animate-fade">
                            <div class="text-center mb-10">
                                <h1 class="text-3xl md:text-5xl font-black mb-3 tracking-tighter text-slate-900">SSC Typing <span class="text-blue-600">Skill Test</span></h1>
                                <p class="text-slate-500 font-bold text-xs uppercase tracking-widest">Prepare for CGL, CHSL & MTS</p>
                            </div>
                            
                            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 max-w-6xl mx-auto">
                                ${PASSAGES.map(p => `
                                    <div class="practice-card">
                                        <div class="flex justify-between items-center">
                                            <span class="text-[8px] font-black uppercase tracking-widest text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md">${p.cat}</span>
                                            <span class="text-[8px] text-slate-300 font-bold uppercase tracking-widest">${p.lang}</span>
                                        </div>
                                        <h3 class="text-sm font-black text-slate-800 leading-tight h-10 overflow-hidden line-clamp-2">${p.title}</h3>
                                        <button onclick="app.openConfig('${p.id}')" class="mt-2 w-full btn-black font-black py-2.5 rounded-xl shadow-md uppercase tracking-widest text-[9px]">Start Now</button>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                } else if (this.state.view === 'test') {
                    const mm = Math.floor(this.state.timeLeft / 60), ss = this.state.timeLeft % 60;
                    const timeStr = `${mm}:${ss < 10 ? '0' : ''}${ss}`;
                    main.innerHTML = `
                        <div class="max-w-6xl mx-auto px-6 py-8 animate-fade">
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <div class="bg-white p-4 rounded-xl text-center border border-slate-100 shadow-sm">
                                    <p class="text-[8px] text-slate-400 font-black uppercase mb-1 tracking-widest">Time Left</p>
                                    <p id="ui-timer-header" class="text-xl font-mono-typing text-blue-600 font-black">${timeStr}</p>
                                </div>
                                <div class="bg-white p-4 rounded-xl text-center border border-slate-100 shadow-sm">
                                    <p class="text-[8px] text-slate-400 font-black uppercase mb-1 tracking-widest">Net Speed</p>
                                    <p id="ui-net" class="text-xl font-mono-typing text-emerald-600 font-black">0</p>
                                </div>
                                <div class="bg-white p-4 rounded-xl text-center border border-slate-100 shadow-sm">
                                    <p class="text-[8px] text-slate-400 font-black uppercase mb-1 tracking-widest">Gross</p>
                                    <p id="ui-gross" class="text-xl font-mono-typing text-slate-400 font-black">0</p>
                                </div>
                                <div class="bg-white p-4 rounded-xl text-center border border-slate-100 shadow-sm">
                                    <p class="text-[8px] text-slate-400 font-black uppercase mb-1 tracking-widest">Key Stks</p>
                                    <p id="ui-keys" class="text-xl font-mono-typing text-slate-800 font-black">0</p>
                                </div>
                            </div>

                            <div id="typing-preview-container" class="mb-6">
                                <div class="px-8 py-2 bg-slate-900 flex justify-between items-center text-white">
                                    <div class="flex items-center gap-3">
                                        <span class="text-[9px] font-black uppercase text-slate-500">TIME:</span>
                                        <span id="ui-timer-para" class="text-lg font-mono-typing font-black text-blue-400">${timeStr}</span>
                                    </div>
                                    <span class="text-[9px] font-black uppercase opacity-40">${this.state.selectedPassage.title}</span>
                                </div>
                                <div id="typing-preview" class="font-mono-typing no-scrollbar"></div>
                            </div>

                            <div id="typing-area-wrapper">
                                <textarea id="typing-area" oninput="app.handleInput(event)" class="font-mono-typing no-scrollbar" placeholder="Start typing the passage precisely as shown above..." spellcheck="false"></textarea>
                            </div>

                            <div class="mt-8 flex justify-between items-center px-4">
                                <span class="text-[9px] font-black text-slate-300 uppercase tracking-widest">SSC OFFICIAL 5-STROKE LOGIC</span>
                                <div class="flex gap-4">
                                    <button onclick="app.restartTest()" class="text-[10px] font-black text-blue-600 hover:text-blue-800 transition uppercase tracking-widest flex items-center gap-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                                        Restart
                                    </button>
                                    <button onclick="app.showHome()" class="text-[10px] font-black text-red-500 hover:text-red-700 transition uppercase tracking-widest">Exit</button>
                                </div>
                            </div>
                        </div>
                    `;
                    this.renderPreview();
                } else if (this.state.view === 'results') {
                    const r = this.calculate();
                    main.innerHTML = `
                        <div class="max-w-4xl mx-auto px-6 py-12 animate-fade">
                            <div class="bg-white rounded-[3rem] shadow-2xl overflow-hidden text-center border border-slate-50">
                                <div class="bg-slate-900 py-10 text-white">
                                    <h2 class="text-3xl font-black mb-1">Test Result</h2>
                                    <p class="text-slate-400 font-black text-[9px] uppercase tracking-widest">Performance Analysis</p>
                                </div>
                                <div class="p-10">
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
                                        <div class="p-6 bg-blue-50 rounded-[1.5rem]">
                                            <p class="text-[8px] font-black text-blue-500 mb-2 uppercase tracking-widest">Net WPM</p>
                                            <p class="text-3xl font-black text-blue-700">${r.nwpm}</p>
                                        </div>
                                        <div class="p-6 bg-emerald-50 rounded-[1.5rem]">
                                            <p class="text-[8px] font-black text-emerald-500 mb-2 uppercase tracking-widest">Accuracy</p>
                                            <p class="text-3xl font-black text-emerald-700">${r.acc}%</p>
                                        </div>
                                        <div class="p-6 bg-red-50 rounded-[1.5rem]">
                                            <p class="text-[8px] font-black text-red-500 mb-2 uppercase tracking-widest">Mistakes</p>
                                            <p class="text-3xl font-black text-red-700">${Math.round(r.mistakes / 5)} Words</p>
                                        </div>
                                        <div class="p-6 bg-slate-100 rounded-[1.5rem]">
                                            <p class="text-[8px] font-black text-slate-500 mb-2 uppercase tracking-widest">Incorrect Chars</p>
                                            <p class="text-3xl font-black text-slate-900">${r.mistakes}</p>
                                        </div>
                                    </div>
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <button onclick="app.showHome()" class="flex-1 btn-black text-white font-black py-4 rounded-xl shadow-xl uppercase tracking-widest text-[10px]">Dashboard</button>
                                        <button onclick="app.startTest()" class="flex-1 bg-blue-600 text-white font-black py-4 rounded-xl shadow-xl uppercase tracking-widest text-[10px]">Try Again</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
        };
        app.init();
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
